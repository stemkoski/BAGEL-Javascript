<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Animation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Animation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as BAGEL from "./index.js";

/**
 * An Animation is similar to a {@link Texture} but designed for drawing images from a spritesheet
 *   (a grid of images), with methods to automatically update
 */
class Animation
{

	/**
	 * Initialize empty Image and Rectangle objects;
	 *  data set with the {@link Texture#load|load} method.
	 * @constructor
	 */
	constructor()
	{
		this.texture  = new BAGEL.Texture();
		this.regionList = [];

		this.frameDuration = 0.25;
		this.totalDuration = null;
		this.loop = false;

		this.elapsedTime = 0;
		this.paused = false;
	}
	
	/**
	 * Load image file and create list of regions depending on number of rows and columns in spritesheet.
	 * @param {string} filename the name (including path) of the image file  
	 */
	async load(fileName, rows=1, cols=1, frameDuration=0.25, loop=false)
	{
		await this.texture.load(fileName);

		// create list of rectangles
		let frameWidth  = this.texture.image.width  / cols;
		let frameHeight = this.texture.image.height / rows;			
		for (let y = 0; y &lt; rows; y++)
        {
            for (let x = 0; x &lt; cols; x++)
            {
				let region = new BAGEL.Rectangle(x*frameWidth, y*frameHeight, frameWidth, frameHeight)
                this.regionList.push( region );
            }
        }
        this.texture.region = this.regionList[0];

        this.frameDuration = frameDuration;
        this.loop = loop;
		this.totalDuration  = frameDuration * this.regionList.length;
	}


	/**
	 * Updates elapsedTime and region used by texture
	 * 
	 */
    update(deltaTime)
    {
        if (this.paused)
			return;
			
        this.elapsedTime += deltaTime;
    
    	// check if loop is reset
		if (this.loop &amp;&amp; this.elapsedTime > this.totalDuration)
            this.elapsedTime -= this.totalDuration;
		
        let regionIndex = Math.floor( this.elapsedTime / this.frameDuration );
        if ( regionIndex >= this.regionList.length )
            regionIndex = this.regionList.length - 1;
		this.texture.region = this.regionList[regionIndex];
    }

	/**
	 * 
	 */
    isFinished()
    {
        return (this.elapsedTime >= this.textureList.length * this.frameDuration) &amp;&amp; !this.loop;
    }

	/**
	 * 
	 */
    clone()
    {
        let anim            = new Animation();
		anim.textureList    = this.textureList;
        anim.frameDuration  = this.frameDuration;
        anim.loop           = this.loop;
		anim.totalDuration  = this.totalDuration;
        anim.currentTexture = this.textureList[0];
        return anim;
    }

}


export { Animation };</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Animation.html">Animation</a></li><li><a href="Clock.html">Clock</a></li><li><a href="Game.html">Game</a></li><li><a href="Gamepad.html">Gamepad</a></li><li><a href="Group.html">Group</a></li><li><a href="Input.html">Input</a></li><li><a href="Label.html">Label</a></li><li><a href="Physics.html">Physics</a></li><li><a href="Rectangle.html">Rectangle</a></li><li><a href="Screen.html">Screen</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="Texture.html">Texture</a></li><li><a href="Vector.html">Vector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun Feb 13 2022 18:52:34 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
